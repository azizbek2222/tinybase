<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>HTML → GitHub Link</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  font-family:Arial;
}
.box{
  width:90%;
  max-width:600px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(12px);
  border-radius:16px;
  padding:20px;
  color:#fff;
}
textarea{
  width:100%;
  height:200px;
  border:none;
  border-radius:10px;
  padding:10px;
  font-family:monospace;
}
button{
  width:100%;
  margin-top:10px;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#00c6ff;
  color:#000;
  font-size:16px;
  cursor:pointer;
}
#out{
  margin-top:10px;
  word-break:break-all;
}
</style>
</head>

<body>
<div class="box">
  <h2>HTML → GitHub Pages link</h2>

  <textarea id="code" placeholder="HTML kodni shu yerga yoz..."></textarea>

  <button onclick="upload()">Link olish</button>

  <div id="out"></div>
</div>

<script>
const TOKEN = "GITHUB_TOKEN_HERE";
const OWNER = "azizbek2222";
const REPO = "html-test";

async function upload(){
  const html = document.getElementById("code").value;
  if(!html){ alert("Kod yoz"); return; }

  const name = "page-" + Date.now() + ".html";

  const res = await fetch(
    `https://api.github.com/repos/${OWNER}/${REPO}/contents/${name}`,
    {
      method:"PUT",
      headers:{
        "Authorization":"token " + TOKEN,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        message:"Create html page",
        content:btoa(unescape(encodeURIComponent(html)))
      })
    }
  );

  const data = await res.json();

  if(data.content){
    const link = `https://${OWNER}.github.io/${REPO}/${name}`;
    document.getElementById("out").innerHTML =
      "✅ LINK:<br><a href='"+link+"' target='_blank'>"+link+"</a>";
  }else{
    document.getElementById("out").innerText =
      "❌ Xatolik: " + JSON.stringify(data);
  }
}
</script>
</body>
</html>